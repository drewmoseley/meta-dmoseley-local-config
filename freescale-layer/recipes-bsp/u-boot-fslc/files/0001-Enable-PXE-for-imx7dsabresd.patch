From 2a85de1dd6413bb19f9ee4b32c685ec94028b34b Mon Sep 17 00:00:00 2001
From: Drew Moseley <drew.moseley@northern.tech>
Date: Mon, 9 Apr 2018 14:18:48 -0400
Subject: [PATCH] Enable PXE for imx7dsabresd

Signed-off-by: Drew Moseley <drew.moseley@northern.tech>

---
 configs/mx7dsabresd_defconfig | 1 +
 include/configs/mx7dsabresd.h | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/configs/mx7dsabresd_defconfig b/configs/mx7dsabresd_defconfig
index 148aff8..a027c06 100644
--- a/configs/mx7dsabresd_defconfig
+++ b/configs/mx7dsabresd_defconfig
@@ -76,3 +76,4 @@ CONFIG_USB_HOST_ETHER=y
 CONFIG_USB_ETHER_ASIX=y
 CONFIG_VIDEO=y
 CONFIG_ERRNO_STR=y
+CONFIG_CMD_PXE=y
diff --git a/include/configs/mx7dsabresd.h b/include/configs/mx7dsabresd.h
index 87d2b52..c927746 100644
--- a/include/configs/mx7dsabresd.h
+++ b/include/configs/mx7dsabresd.h
@@ -87,6 +87,9 @@
 	UPDATE_M4_ENV \
 	CONFIG_MFG_ENV_SETTINGS \
 	CONFIG_DFU_ENV_SETTINGS \
+	"pxefile_addr_r=0x82000000\0" \
+	"kernel_addr_r=" __stringify(CONFIG_LOADADDR) "\0" \
+	"fdt_addr_r=0x83000000\0" \
 	"script=boot.scr\0" \
 	"image=zImage\0" \
 	"console=ttymxc0\0" \
